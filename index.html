<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Society Arts - Story Builder</title>
  <script src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
  <script src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
  <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
  <link href="https://fonts.googleapis.com/css2?family=Cormorant+Garamond:ital,wght@0,300;0,400;0,500;0,600;0,700;1,400&family=Source+Sans+3:wght@300;400;500;600&display=swap" rel="stylesheet">
  <style>
    * {
      box-sizing: border-box;
      margin: 0;
      padding: 0;
    }
    html, body, #root {
      height: 100%;
      width: 100%;
      overflow: hidden;
    }
    body {
      font-family: 'Source Sans 3', -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
      background: #F5F0EB;
      font-size: 15px;
      line-height: 1.5;
      -webkit-font-smoothing: antialiased;
      -moz-osx-font-smoothing: grayscale;
    }
    @keyframes pulse {
      0%, 100% { opacity: 0.4; }
      50% { opacity: 1; }
    }
    @keyframes listening-pulse {
      0%, 100% { transform: scale(1); box-shadow: 0 0 0 0 rgba(199, 91, 63, 0.4); }
      50% { transform: scale(1.05); box-shadow: 0 0 0 12px rgba(199, 91, 63, 0); }
    }
    @keyframes speaking-wave {
      0%, 100% { transform: scale(1); }
      25% { transform: scale(1.1); }
      50% { transform: scale(1); }
      75% { transform: scale(1.08); }
    }
    /* Custom scrollbar */
    ::-webkit-scrollbar {
      width: 6px;
    }
    ::-webkit-scrollbar-track {
      background: transparent;
    }
    ::-webkit-scrollbar-thumb {
      background: #D4CCC4;
      border-radius: 3px;
    }
    ::-webkit-scrollbar-thumb:hover {
      background: #B8A99A;
    }
  </style>
</head>
<body>
  <div id="root"></div>
  
  <script type="text/babel">
    const { useState, useRef, useEffect, useCallback } = React;

    // Society Arts system prompt for Hume EVI
    const SOCIETY_ARTS_PROMPT = `You are a warm, creative art director for Society Arts ‚Äî a platform that transforms personal stories and memories into beautiful, custom AI-generated artwork.

ABOUT SOCIETY ARTS:
Society Arts helps people turn their most meaningful moments, memories, and ideas into stunning visual art. Whether it's a cherished family memory, a beloved pet, a dream landscape, or an emotion they want to capture ‚Äî we help bring their vision to life through AI-powered art generation. Our mission is to make personalized art accessible to everyone.

YOUR PERSONALITY:
- Warm, encouraging, and genuinely interested in people's stories
- Patient and supportive ‚Äî treat every idea as valuable
- Creative and inspiring ‚Äî help people see the artistic potential in their ideas
- Professional but friendly ‚Äî like a trusted creative partner
- Wholesome and family-friendly at all times

CONTENT GUIDELINES:
- Keep all conversations family-friendly and appropriate for all ages
- Celebrate themes of love, family, nature, hope, joy, adventure, and meaningful life moments
- Gently redirect if someone requests inappropriate content
- Never generate descriptions involving violence, explicit content, or harmful themes

CONVERSATION STYLE:
- Ask about what moment, memory, or scene they want to capture
- Explore the setting, mood, colors, and artistic style they prefer
- After gathering enough details, create a vivid 2-3 sentence description of the artwork
- Keep responses conversational and warm, not too long

Remember: You're helping people create meaningful, beautiful art that they'll treasure.`;

    // Claude API system prompt (for text mode and story extraction)
    const CLAUDE_SYSTEM_PROMPT = `You are a warm, creative art director for Society Arts ‚Äî a platform that transforms personal stories and memories into beautiful, custom AI-generated artwork.

ABOUT SOCIETY ARTS:
Society Arts helps people turn their most meaningful moments, memories, and ideas into stunning visual art. Whether it's a cherished family memory, a beloved pet, a dream landscape, or an emotion they want to capture ‚Äî we help bring their vision to life through AI-powered art generation. Our mission is to make personalized art accessible to everyone.

YOUR PERSONALITY:
- Warm, encouraging, and genuinely interested in people's stories
- Patient and supportive ‚Äî treat every idea as valuable
- Creative and inspiring ‚Äî help people see the artistic potential in their ideas
- Professional but friendly ‚Äî like a trusted creative partner
- Wholesome and family-friendly at all times

CONTENT GUIDELINES (IMPORTANT):
- Keep all conversations and generated content family-friendly and appropriate for all ages
- Celebrate themes of love, family, nature, hope, joy, adventure, and meaningful life moments
- Gently redirect if someone requests inappropriate, violent, or adult content
- If asked about something outside art creation, kindly guide them back to creating their story
- Never generate descriptions involving violence, explicit content, or harmful themes

RESPONSE FORMAT:
You must ALWAYS respond with valid JSON in this exact format:
{
  "message": "Your conversational response to the user",
  "title": "Short evocative title (3-5 words) or null if not ready",
  "story": "The full image description/prompt or null if not ready",
  "isComplete": false
}

STORY GENERATION:
- Generate the "story" field once you have enough details (usually after 3-4 exchanges)
- Write 2-4 sentences of vivid, painterly description
- Include subject, setting, mood, colors, and artistic style
- Make it emotionally resonant and visually rich

TITLE GENERATION:
- Create a "title" once a clear theme emerges
- Make it evocative and poetic, 3-5 words

Remember: You're here to help people create meaningful, beautiful art that they'll treasure.`;

    // Story extraction prompt for voice mode
    const STORY_EXTRACTION_PROMPT = `Based on this conversation between a user and an art director, extract:
1. A short evocative title (3-5 words) if there's a clear theme
2. A vivid image description/story (2-4 sentences) if enough details have been shared

Respond with JSON only:
{
  "title": "title here or null",
  "story": "image description here or null"
}

Only generate a story if there are enough concrete details about the subject, setting, mood, or style. If it's too early in the conversation, return null for both.`;

    // Hume EVI Hook
    function useHumeEVI({ onUserMessage, onAssistantMessage }) {
      const [isConnected, setIsConnected] = useState(false);
      const [isListening, setIsListening] = useState(false);
      const [isSpeaking, setIsSpeaking] = useState(false);
      const [error, setError] = useState(null);
      
      const socketRef = useRef(null);
      const audioContextRef = useRef(null);
      const mediaRecorderRef = useRef(null);
      const audioQueueRef = useRef([]);
      const isPlayingRef = useRef(false);
      const streamRef = useRef(null);
      const currentAssistantMessageRef = useRef('');

      const getAccessToken = async () => {
        try {
          const response = await fetch('/.netlify/functions/hume-token', {
            method: 'POST',
          });
          const data = await response.json();
          if (data.error) {
            throw new Error(data.error);
          }
          return data.accessToken;
        } catch (err) {
          console.error('Failed to get Hume access token:', err);
          throw err;
        }
      };

      const playAudioQueue = async () => {
        if (isPlayingRef.current || audioQueueRef.current.length === 0) return;
        
        isPlayingRef.current = true;
        setIsSpeaking(true);

        while (audioQueueRef.current.length > 0) {
          const audioData = audioQueueRef.current.shift();
          try {
            await playAudio(audioData);
          } catch (err) {
            console.error('Error playing audio:', err);
          }
        }

        isPlayingRef.current = false;
        setIsSpeaking(false);
      };

      const playAudio = (base64Audio) => {
        return new Promise((resolve, reject) => {
          try {
            if (!audioContextRef.current) {
              audioContextRef.current = new (window.AudioContext || window.webkitAudioContext)();
            }

            const binaryString = atob(base64Audio);
            const bytes = new Uint8Array(binaryString.length);
            for (let i = 0; i < binaryString.length; i++) {
              bytes[i] = binaryString.charCodeAt(i);
            }

            audioContextRef.current.decodeAudioData(bytes.buffer, (buffer) => {
              const source = audioContextRef.current.createBufferSource();
              source.buffer = buffer;
              source.connect(audioContextRef.current.destination);
              source.onended = resolve;
              source.start(0);
            }, reject);
          } catch (err) {
            reject(err);
          }
        });
      };

      const connect = async (configId = null) => {
        try {
          setError(null);
          const accessToken = await getAccessToken();
          
          let wsUrl = `wss://api.hume.ai/v0/evi/chat?access_token=${accessToken}`;
          if (configId) {
            wsUrl += `&config_id=${configId}`;
          }

          socketRef.current = new WebSocket(wsUrl);

          socketRef.current.onopen = () => {
            console.log('Hume EVI connected');
            setIsConnected(true);
            
            socketRef.current.send(JSON.stringify({
              type: 'session_settings',
              system_prompt: SOCIETY_ARTS_PROMPT,
            }));
          };

          socketRef.current.onmessage = (event) => {
            const message = JSON.parse(event.data);
            
            switch (message.type) {
              case 'user_message':
                if (message.message?.content) {
                  console.log('User said:', message.message.content);
                  onUserMessage?.(message.message.content);
                }
                break;
                
              case 'assistant_message':
                if (message.message?.content) {
                  console.log('Assistant said:', message.message.content);
                  currentAssistantMessageRef.current = message.message.content;
                }
                break;
              
              case 'assistant_end':
                // Assistant finished speaking, now we have the complete message
                if (currentAssistantMessageRef.current) {
                  onAssistantMessage?.(currentAssistantMessageRef.current);
                  currentAssistantMessageRef.current = '';
                }
                break;
                
              case 'audio_output':
                if (message.data) {
                  audioQueueRef.current.push(message.data);
                  playAudioQueue();
                }
                break;
                
              case 'user_interruption':
                audioQueueRef.current = [];
                break;
                
              case 'error':
                console.error('Hume EVI error:', message);
                setError(message.message || 'An error occurred');
                break;
            }
          };

          socketRef.current.onerror = (err) => {
            console.error('WebSocket error:', err);
            setError('Connection error');
            setIsConnected(false);
          };

          socketRef.current.onclose = () => {
            console.log('Hume EVI disconnected');
            setIsConnected(false);
            setIsListening(false);
          };

        } catch (err) {
          console.error('Failed to connect to Hume EVI:', err);
          setError(err.message);
          throw err;
        }
      };

      const startListening = async () => {
        if (!socketRef.current || socketRef.current.readyState !== WebSocket.OPEN) {
          console.error('WebSocket not connected');
          return;
        }

        try {
          const stream = await navigator.mediaDevices.getUserMedia({ 
            audio: {
              echoCancellation: true,
              noiseSuppression: true,
              autoGainControl: true,
            } 
          });
          streamRef.current = stream;

          if (audioContextRef.current?.state === 'suspended') {
            await audioContextRef.current.resume();
          }

          mediaRecorderRef.current = new MediaRecorder(stream, {
            mimeType: 'audio/webm;codecs=opus',
          });

          mediaRecorderRef.current.ondataavailable = async (event) => {
            if (event.data.size > 0 && socketRef.current?.readyState === WebSocket.OPEN) {
              const reader = new FileReader();
              reader.onloadend = () => {
                const base64 = reader.result.split(',')[1];
                socketRef.current.send(JSON.stringify({
                  type: 'audio_input',
                  data: base64,
                }));
              };
              reader.readAsDataURL(event.data);
            }
          };

          mediaRecorderRef.current.start(100);
          setIsListening(true);
        } catch (err) {
          console.error('Failed to start listening:', err);
          setError('Microphone access denied');
        }
      };

      const stopListening = () => {
        if (mediaRecorderRef.current && mediaRecorderRef.current.state !== 'inactive') {
          mediaRecorderRef.current.stop();
        }
        if (streamRef.current) {
          streamRef.current.getTracks().forEach(track => track.stop());
          streamRef.current = null;
        }
        setIsListening(false);
      };

      const disconnect = () => {
        stopListening();
        if (socketRef.current) {
          socketRef.current.close();
          socketRef.current = null;
        }
        audioQueueRef.current = [];
        setIsConnected(false);
        setIsSpeaking(false);
      };

      useEffect(() => {
        return () => {
          disconnect();
        };
      }, []);

      return {
        isConnected,
        isListening,
        isSpeaking,
        error,
        connect,
        disconnect,
        startListening,
        stopListening,
      };
    }

    function SocietyArtsStoryBuilder() {
      const [messages, setMessages] = useState([]);
      const [inputValue, setInputValue] = useState('');
      const [isLoading, setIsLoading] = useState(false);
      const [story, setStory] = useState(null);
      const [title, setTitle] = useState(null);
      const [selectedVariation, setSelectedVariation] = useState('main');
      const [variations, setVariations] = useState({ A: null, B: null });
      const [selectedStyles, setSelectedStyles] = useState([]);
      const [aspectRatio, setAspectRatio] = useState('1:1');
      const [hasStarted, setHasStarted] = useState(false);
      const [voiceMode, setVoiceMode] = useState(false);
      
      const messagesEndRef = useRef(null);
      const extractionTimeoutRef = useRef(null);

      // Callback when user speaks in voice mode
      const handleVoiceUserMessage = useCallback((content) => {
        if (!hasStarted) setHasStarted(true);
        setMessages(prev => [...prev, { role: 'user', content }]);
      }, [hasStarted]);

      // Callback when assistant speaks in voice mode
      const handleVoiceAssistantMessage = useCallback((content) => {
        setMessages(prev => [...prev, { role: 'assistant', content }]);
        
        // Schedule story extraction after assistant responds
        if (extractionTimeoutRef.current) {
          clearTimeout(extractionTimeoutRef.current);
        }
        extractionTimeoutRef.current = setTimeout(() => {
          extractStoryFromConversation();
        }, 1000);
      }, []);

      // Extract story from voice conversation using Claude
      const extractStoryFromConversation = async () => {
        try {
          const conversationText = messages.map(m => `${m.role}: ${m.content}`).join('\n');
          if (conversationText.length < 50) return; // Too short to extract

          const response = await fetch('/.netlify/functions/chat', {
            method: 'POST',
            headers: { 'Content-Type': 'application/json' },
            body: JSON.stringify({
              model: 'claude-sonnet-4-20250514',
              max_tokens: 500,
              messages: [{
                role: 'user',
                content: `${STORY_EXTRACTION_PROMPT}\n\nConversation:\n${conversationText}`
              }]
            }),
          });

          const data = await response.json();
          if (data.content && data.content[0]) {
            let responseText = data.content[0].text;
            responseText = responseText.replace(/```json\n?/g, '').replace(/```\n?/g, '').trim();
            
            try {
              const parsed = JSON.parse(responseText);
              if (parsed.title && !title) {
                setTitle(parsed.title);
              }
              if (parsed.story) {
                setStory(parsed.story);
              }
            } catch (e) {
              console.log('Could not parse story extraction:', e);
            }
          }
        } catch (err) {
          console.error('Story extraction error:', err);
        }
      };

      // Hume EVI with callbacks
      const hume = useHumeEVI({
        onUserMessage: handleVoiceUserMessage,
        onAssistantMessage: handleVoiceAssistantMessage,
      });

      const scrollToBottom = () => {
        messagesEndRef.current?.scrollIntoView({ behavior: 'smooth' });
      };

      useEffect(() => {
        scrollToBottom();
      }, [messages]);

      // Re-extract when messages change in voice mode
      useEffect(() => {
        if (voiceMode && messages.length >= 4 && messages.length % 2 === 0) {
          extractStoryFromConversation();
        }
      }, [messages, voiceMode]);

      const handleNewProject = () => {
        setMessages([]);
        setInputValue('');
        setIsLoading(false);
        setStory(null);
        setTitle(null);
        setSelectedVariation('main');
        setVariations({ A: null, B: null });
        setSelectedStyles([]);
        setAspectRatio('1:1');
        setHasStarted(false);
        setVoiceMode(false);
        hume.disconnect();
      };

      const callClaudeAPI = async (messagesPayload) => {
        const response = await fetch('/.netlify/functions/chat', {
          method: 'POST',
          headers: {
            'Content-Type': 'application/json',
          },
          body: JSON.stringify({
            model: 'claude-sonnet-4-20250514',
            max_tokens: 1000,
            messages: messagesPayload,
          }),
        });
        return response.json();
      };

      const toggleVoiceMode = async () => {
        if (voiceMode) {
          hume.disconnect();
          setVoiceMode(false);
        } else {
          try {
            await hume.connect();
            setVoiceMode(true);
            setHasStarted(true);
            setTimeout(() => {
              hume.startListening();
            }, 500);
          } catch (err) {
            console.error('Failed to enable voice mode:', err);
            alert('Failed to connect to voice service. Please check your Hume.ai credentials.');
          }
        }
      };

      const handleMicClick = async () => {
        if (!voiceMode) {
          await toggleVoiceMode();
        } else if (hume.isListening) {
          hume.stopListening();
        } else if (!hume.isSpeaking) {
          hume.startListening();
        }
      };

      const sendMessage = async () => {
        if (!inputValue.trim() || isLoading) return;

        if (!hasStarted) {
          setHasStarted(true);
        }

        const userMessage = { role: 'user', content: inputValue };
        const updatedMessages = [...messages, userMessage];
        setMessages(updatedMessages);
        setInputValue('');
        setIsLoading(true);

        try {
          let contextMessage = '';
          if (story) {
            contextMessage = `\n\n[CURRENT STORY STATE: "${story}"]\n[CURRENT TITLE: "${title || 'None yet'}"]\n\nIf the user is requesting a modification, update the story accordingly.`;
          }

          const userPrompt = updatedMessages.map(m => `${m.role}: ${m.content}`).join('\n');

          const data = await callClaudeAPI([
            { 
              role: 'user', 
              content: `${CLAUDE_SYSTEM_PROMPT}${contextMessage}\n\n---\nConversation so far:\n${userPrompt}\n\nRespond as the assistant with valid JSON only.`
            }
          ]);
          
          if (data.error) {
            throw new Error(data.error.message || 'API Error');
          }
          
          if (data.content && data.content[0]) {
            let responseText = data.content[0].text;
            responseText = responseText.replace(/```json\n?/g, '').replace(/```\n?/g, '').trim();
            
            try {
              const parsed = JSON.parse(responseText);
              
              if (parsed.title) {
                setTitle(parsed.title);
              }
              if (parsed.story) {
                setStory(parsed.story);
              }
              
              setMessages(prev => [...prev, {
                role: 'assistant',
                content: parsed.message || "I'd love to hear more about your vision!"
              }]);
            } catch (parseError) {
              setMessages(prev => [...prev, {
                role: 'assistant',
                content: responseText
              }]);
            }
          } else {
            throw new Error('No response content');
          }
        } catch (error) {
          console.error('Error:', error);
          setMessages(prev => [...prev, {
            role: 'assistant',
            content: "I apologize, but I'm having trouble connecting right now. Please try again in a moment."
          }]);
        } finally {
          setIsLoading(false);
        }
      };

      const handleKeyDown = (e) => {
        if (e.key === 'Enter' && !e.shiftKey) {
          e.preventDefault();
          sendMessage();
        }
      };

      const generateVariation = async (variationType) => {
        if (!story) return;
        setIsLoading(true);
        
        try {
          const data = await callClaudeAPI([{
            role: 'user',
            content: `Take this image description and create an interesting variation. Keep the core subject and mood but change the perspective, add new details, or shift the emphasis. Keep it wholesome and family-friendly. Original: "${story}". Respond with ONLY the new description text, no explanation, no quotes, no JSON.`
          }]);
          
          if (data.error) {
            throw new Error(data.error.message || 'API Error');
          }
          
          if (data.content && data.content[0]) {
            setVariations(prev => ({
              ...prev,
              [variationType]: data.content[0].text.trim()
            }));
          }
        } catch (error) {
          console.error('Error generating variation:', error);
        } finally {
          setIsLoading(false);
        }
      };

      const styleOptions = [
        { id: 1, name: 'Impressionist Dawn', image: 'https://images.unsplash.com/photo-1490750967868-88aa4486c946?w=200&h=200&fit=crop' },
        { id: 2, name: 'Wild Watercolor Vibrance', image: 'https://images.unsplash.com/photo-1487530811176-3780de880c2d?w=200&h=200&fit=crop' },
        { id: 3, name: 'Soulful Portraiture', image: 'https://images.unsplash.com/photo-1579783902614-a3fb3927b6a5?w=200&h=200&fit=crop' },
        { id: 4, name: 'Textured Earth Tones', image: 'https://images.unsplash.com/photo-1549289524-06cf8837ace5?w=200&h=200&fit=crop' }
      ];

      const toggleStyle = (styleId) => {
        setSelectedStyles(prev => 
          prev.includes(styleId) 
            ? prev.filter(id => id !== styleId)
            : [...prev, styleId]
        );
      };

      const getMicButtonStyle = (isWelcome = false) => {
        const baseStyle = isWelcome ? styles.welcomeMicButton : styles.micButton;
        
        if (hume.isListening) {
          return {
            ...baseStyle,
            animation: 'listening-pulse 1.5s ease-in-out infinite',
            backgroundColor: '#C75B3F',
          };
        }
        if (hume.isSpeaking) {
          return {
            ...baseStyle,
            backgroundColor: '#4A90A4',
            animation: 'speaking-wave 1s ease-in-out infinite',
          };
        }
        if (voiceMode) {
          return {
            ...baseStyle,
            backgroundColor: '#C75B3F',
            border: '2px solid #fff',
          };
        }
        return baseStyle;
      };

      const getMicIcon = () => {
        if (hume.isSpeaking) {
          return (
            <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="white" strokeWidth="1.5">
              <polygon points="11 5 6 9 2 9 2 15 6 15 11 19 11 5"></polygon>
              <path d="M19.07 4.93a10 10 0 0 1 0 14.14M15.54 8.46a5 5 0 0 1 0 7.07"></path>
            </svg>
          );
        }
        return (
          <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="white" strokeWidth="1.5">
            <path d="M12 1a3 3 0 0 0-3 3v8a3 3 0 0 0 6 0V4a3 3 0 0 0-3-3z"></path>
            <path d="M19 10v2a7 7 0 0 1-14 0v-2"></path>
            <line x1="12" y1="19" x2="12" y2="23"></line>
            <line x1="8" y1="23" x2="16" y2="23"></line>
          </svg>
        );
      };

      return (
        <div style={styles.container}>
          {/* Fixed Header */}
          <header style={styles.header}>
            <div style={styles.headerLeft}>
              <button style={styles.menuButton}>
                <svg width="22" height="22" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="1.5">
                  <line x1="3" y1="6" x2="21" y2="6"></line>
                  <line x1="3" y1="12" x2="21" y2="12"></line>
                  <line x1="3" y1="18" x2="21" y2="18"></line>
                </svg>
              </button>
              <h1 style={styles.logo}>SOCIETY ARTS</h1>
            </div>
            <div style={styles.headerRight}>
              <button style={styles.cartButton}>
                <svg width="22" height="22" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="1.5">
                  <circle cx="9" cy="21" r="1"></circle>
                  <circle cx="20" cy="21" r="1"></circle>
                  <path d="M1 1h4l2.68 13.39a2 2 0 0 0 2 1.61h9.72a2 2 0 0 0 2-1.61L23 6H6"></path>
                </svg>
              </button>
              <button style={styles.newProjectButton} onClick={handleNewProject}>
                New Project
              </button>
              <button style={styles.loginButton}>Log In</button>
            </div>
          </header>

          {/* Fixed Subheader */}
          <div style={styles.subheader}>
            <h2 style={styles.subheaderTitle}>Your Story, Your Style</h2>
            <p style={styles.subheaderText}>First add your story, then select your styles. When both are done, hit Generate and watch your idea come alive.</p>
            <div style={styles.progressBar}>
              <div style={{
                ...styles.progressFill,
                width: story ? (selectedStyles.length > 0 ? '100%' : '50%') : (hasStarted ? '15%' : '5%')
              }}></div>
            </div>
          </div>

          {/* Main Content */}
          <main style={styles.main}>
            {/* Left Column - Your Story */}
            <div style={styles.leftColumn}>
              <div style={styles.storyCard}>
                <div style={styles.storyHeaderSimple}>
                  <span style={styles.storyLabel}>Your Story</span>
                  {voiceMode && <span style={styles.voiceBadge}>üé§ Voice</span>}
                </div>
                <div style={styles.storyContentSimple}>
                  {story ? (
                    <p style={styles.storyText}>{story}</p>
                  ) : (
                    <p style={styles.storyPlaceholder}>
                      Your story will appear here ‚Äî once you've shared a moment worth remembering.
                    </p>
                  )}
                </div>
              </div>

              {story && (
                <>
                  <div style={{
                    ...styles.variationCard,
                    ...(selectedVariation === 'A' ? styles.storyCardSelected : {})
                  }} onClick={() => setSelectedVariation('A')}>
                    <div style={styles.variationHeader}>
                      <div style={styles.radioOuter}>
                        {selectedVariation === 'A' && <div style={styles.radioInner}></div>}
                      </div>
                      <span style={styles.storyLabel}>Variation A</span>
                      <button 
                        style={styles.anotherTakeButton}
                        onClick={(e) => { e.stopPropagation(); generateVariation('A'); }}
                      >
                        Another take <span style={styles.chevron}>‚ñº</span>
                      </button>
                    </div>
                    {variations.A && (
                      <div style={styles.storyContent}>
                        <p style={styles.storyText}>{variations.A}</p>
                      </div>
                    )}
                  </div>

                  <div style={{
                    ...styles.variationCard,
                    ...(selectedVariation === 'B' ? styles.storyCardSelected : {})
                  }} onClick={() => setSelectedVariation('B')}>
                    <div style={styles.variationHeader}>
                      <div style={styles.radioOuter}>
                        {selectedVariation === 'B' && <div style={styles.radioInner}></div>}
                      </div>
                      <span style={styles.storyLabel}>Variation B</span>
                      <button 
                        style={styles.anotherTakeButton}
                        onClick={(e) => { e.stopPropagation(); generateVariation('B'); }}
                      >
                        Another take <span style={styles.chevron}>‚ñº</span>
                      </button>
                    </div>
                    {variations.B && (
                      <div style={styles.storyContent}>
                        <p style={styles.storyText}>{variations.B}</p>
                      </div>
                    )}
                  </div>
                </>
              )}
            </div>

            {/* Center Column - Chat */}
            <div style={styles.centerColumn}>
              <div style={styles.chatContainer}>
                {title && (
                  <div style={styles.titleDropdown}>
                    <span>{title}</span>
                    <svg width="12" height="12" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2">
                      <polyline points="6 9 12 15 18 9"></polyline>
                    </svg>
                  </div>
                )}
                
                {/* Voice mode indicator */}
                {voiceMode && (
                  <div style={styles.voiceModeIndicator}>
                    <span style={styles.voiceModeText}>
                      {hume.isListening ? 'üé§ Listening...' : hume.isSpeaking ? 'üîä Speaking...' : hume.error ? '‚ùå ' + hume.error : 'üéôÔ∏è Voice Mode (Hume EVI)'}
                    </span>
                    <button style={styles.exitVoiceButton} onClick={() => toggleVoiceMode()}>
                      Exit Voice Mode
                    </button>
                  </div>
                )}
                
                <div style={styles.messagesContainer}>
                  {!hasStarted ? (
                    <div style={styles.welcomeContainer}>
                      <h2 style={styles.welcomeTitle}>Welcome to Society Arts.</h2>
                      <p style={styles.welcomeText}>
                        I'm here to help create your beautiful work of art from your own idea or personal story. Let me know when you're ready to begin.
                      </p>
                      <div style={styles.welcomeInputWrapper}>
                        <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="#A89F94" strokeWidth="1.5" style={{flexShrink: 0}}>
                          <path d="M17 3a2.828 2.828 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5L17 3z"></path>
                        </svg>
                        <input
                          type="text"
                          style={styles.welcomeInput}
                          placeholder={hume.isListening ? "Listening..." : "Start your story..."}
                          value={inputValue}
                          onChange={(e) => setInputValue(e.target.value)}
                          onKeyDown={handleKeyDown}
                          disabled={isLoading || hume.isListening}
                        />
                        <button 
                          style={{...styles.welcomeSendButton, opacity: inputValue.trim() ? 1 : 0.4}}
                          onClick={sendMessage}
                          disabled={isLoading || !inputValue.trim()}
                        >
                          <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="1.5">
                            <line x1="22" y1="2" x2="11" y2="13"></line>
                            <polygon points="22 2 15 22 11 13 2 9 22 2"></polygon>
                          </svg>
                        </button>
                        <button 
                          style={getMicButtonStyle(true)} 
                          onClick={handleMicClick}
                          title={voiceMode ? (hume.isListening ? "Listening..." : "Click to speak") : "Enable Hume voice mode"}
                        >
                          {getMicIcon()}
                        </button>
                      </div>
                      {!voiceMode && (
                        <p style={styles.voiceHint}>Click the microphone to enable voice mode powered by Hume AI</p>
                      )}
                    </div>
                  ) : (
                    <>
                      {messages.map((msg, index) => (
                        <div 
                          key={index} 
                          style={msg.role === 'user' ? styles.userMessage : styles.assistantMessage}
                        >
                          {msg.role === 'user' ? (
                            <div style={styles.userBubble}>{msg.content}</div>
                          ) : (
                            <p style={styles.assistantText}>{msg.content}</p>
                          )}
                        </div>
                      ))}
                      {(isLoading || (voiceMode && hume.isListening)) && (
                        <div style={styles.assistantMessage}>
                          <div style={styles.typingIndicator}>
                            <div style={{...styles.dot, animationDelay: '0s'}}></div>
                            <div style={{...styles.dot, animationDelay: '0.2s'}}></div>
                            <div style={{...styles.dot, animationDelay: '0.4s'}}></div>
                          </div>
                        </div>
                      )}
                      <div ref={messagesEndRef} />
                    </>
                  )}
                </div>

                {hasStarted && (
                  <div style={styles.inputContainer}>
                    <div style={styles.inputWrapper}>
                      <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="#A89F94" strokeWidth="1.5" style={{flexShrink: 0}}>
                        <path d="M17 3a2.828 2.828 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5L17 3z"></path>
                      </svg>
                      <input
                        type="text"
                        style={styles.textInput}
                        placeholder={hume.isListening ? "Listening..." : "Start your story..."}
                        value={inputValue}
                        onChange={(e) => setInputValue(e.target.value)}
                        onKeyDown={handleKeyDown}
                        disabled={isLoading || hume.isListening}
                      />
                      <button 
                        style={{...styles.sendButton, opacity: inputValue.trim() ? 1 : 0.4}}
                        onClick={sendMessage}
                        disabled={isLoading || !inputValue.trim()}
                      >
                        <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="1.5">
                          <line x1="22" y1="2" x2="11" y2="13"></line>
                          <polygon points="22 2 15 22 11 13 2 9 22 2"></polygon>
                        </svg>
                      </button>
                      <button 
                        style={getMicButtonStyle(false)} 
                        onClick={handleMicClick}
                        title={voiceMode ? (hume.isListening ? "Listening..." : "Click to speak") : "Enable Hume voice mode"}
                      >
                        {getMicIcon()}
                      </button>
                    </div>
                  </div>
                )}
              </div>
            </div>

            {/* Right Column - Styles */}
            <div style={styles.rightColumn}>
              <div style={styles.formatDropdown}>
                <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="1.5">
                  <rect x="3" y="3" width="18" height="18" rx="2" ry="2"></rect>
                </svg>
                <span style={styles.formatLabel}>Format</span>
                <span style={styles.formatValue}>{aspectRatio}</span>
                <select 
                  style={styles.formatSelect}
                  value={aspectRatio}
                  onChange={(e) => setAspectRatio(e.target.value)}
                >
                  <option value="1:1">1:1</option>
                  <option value="16:9">16:9</option>
                  <option value="9:16">9:16</option>
                  <option value="4:3">4:3</option>
                </select>
                <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="#7A7067" strokeWidth="2">
                  <polyline points="6 9 12 15 18 9"></polyline>
                </svg>
              </div>

              {selectedStyles.length === 0 && !hasStarted ? (
                <button style={styles.addStyleButton}>
                  Add style
                </button>
              ) : (
                <div style={styles.stylesGrid}>
                  {styleOptions.map((style) => (
                    <div 
                      key={style.id} 
                      style={{
                        ...styles.styleCard,
                        ...(selectedStyles.includes(style.id) ? styles.styleCardSelected : {})
                      }}
                      onClick={() => toggleStyle(style.id)}
                    >
                      <div style={styles.styleImageContainer}>
                        <img 
                          src={style.image} 
                          alt={style.name}
                          style={styles.styleImage}
                        />
                        <button style={styles.styleMenuButton}>
                          <svg width="14" height="14" viewBox="0 0 24 24" fill="currentColor">
                            <circle cx="12" cy="5" r="2"></circle>
                            <circle cx="12" cy="12" r="2"></circle>
                            <circle cx="12" cy="19" r="2"></circle>
                          </svg>
                        </button>
                      </div>
                      <p style={styles.styleName}>{style.name}</p>
                    </div>
                  ))}
                </div>
              )}
            </div>
          </main>

          {/* Fixed Footer */}
          <footer style={styles.footer}>
            <button style={styles.saveButton}>Save Project</button>
            <button 
              style={{
                ...styles.createButton,
                opacity: story && selectedStyles.length > 0 ? 1 : 0.6
              }}
              disabled={!story || selectedStyles.length === 0}
            >
              Create
              <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2">
                <line x1="5" y1="12" x2="19" y2="12"></line>
                <polyline points="12 5 19 12 12 19"></polyline>
              </svg>
            </button>
            <button style={styles.helpButton}>?</button>
          </footer>
        </div>
      );
    }

    const styles = {
      container: {
        height: '100vh',
        backgroundColor: '#F5F0EB',
        fontFamily: "'Source Sans 3', -apple-system, BlinkMacSystemFont, sans-serif",
        color: '#3D3530',
        display: 'flex',
        flexDirection: 'column',
        overflow: 'hidden',
      },
      header: {
        display: 'flex',
        justifyContent: 'space-between',
        alignItems: 'center',
        padding: '16px 24px',
        backgroundColor: '#FAF8F5',
        borderBottom: '1px solid #E8E2DB',
        flexShrink: 0,
        zIndex: 100,
      },
      headerLeft: {
        display: 'flex',
        alignItems: 'center',
        gap: '16px',
      },
      menuButton: {
        background: 'none',
        border: 'none',
        cursor: 'pointer',
        color: '#3D3530',
        padding: '4px',
        display: 'flex',
      },
      logo: {
        fontFamily: "'Cormorant Garamond', Georgia, 'Times New Roman', serif",
        fontSize: '24px',
        fontWeight: '500',
        letterSpacing: '4px',
        margin: 0,
        color: '#3D3530',
      },
      headerRight: {
        display: 'flex',
        alignItems: 'center',
        gap: '12px',
      },
      cartButton: {
        background: 'none',
        border: 'none',
        cursor: 'pointer',
        color: '#3D3530',
        padding: '4px',
        display: 'flex',
      },
      newProjectButton: {
        backgroundColor: '#8B7355',
        color: 'white',
        border: 'none',
        padding: '12px 22px',
        borderRadius: '25px',
        fontSize: '14px',
        fontWeight: '500',
        cursor: 'pointer',
        fontFamily: "'Source Sans 3', sans-serif",
        letterSpacing: '0.3px',
      },
      loginButton: {
        backgroundColor: 'transparent',
        color: '#3D3530',
        border: '1px solid #D4CCC4',
        padding: '12px 22px',
        borderRadius: '25px',
        fontSize: '14px',
        fontWeight: '500',
        cursor: 'pointer',
        fontFamily: "'Source Sans 3', sans-serif",
        letterSpacing: '0.3px',
      },
      subheader: {
        padding: '16px 24px 14px',
        backgroundColor: '#FAF8F5',
        flexShrink: 0,
        zIndex: 100,
      },
      subheaderTitle: {
        fontFamily: "'Cormorant Garamond', Georgia, 'Times New Roman', serif",
        fontSize: '18px',
        fontWeight: '600',
        margin: '0 0 4px 0',
        color: '#3D3530',
        letterSpacing: '0.5px',
      },
      subheaderText: {
        fontSize: '13px',
        color: '#7A7067',
        margin: '0 0 12px 0',
        lineHeight: '1.5',
        fontWeight: '400',
      },
      progressBar: {
        height: '4px',
        backgroundColor: '#E8E2DB',
        borderRadius: '2px',
        overflow: 'hidden',
      },
      progressFill: {
        height: '100%',
        backgroundColor: '#C75B3F',
        borderRadius: '2px',
        transition: 'width 0.5s ease',
      },
      main: {
        display: 'grid',
        gridTemplateColumns: '280px 1fr 280px',
        gap: '20px',
        padding: '20px 24px',
        flex: 1,
        minHeight: 0,
        overflow: 'hidden',
      },
      leftColumn: {
        display: 'flex',
        flexDirection: 'column',
        gap: '12px',
        overflowY: 'auto',
        minWidth: 0,
        paddingRight: '4px',
      },
      storyCard: {
        backgroundColor: '#FAF8F5',
        borderRadius: '12px',
        padding: '16px',
        border: '2px solid transparent',
      },
      storyCardSelected: {
        borderColor: '#C75B3F',
      },
      storyHeaderSimple: {
        marginBottom: '12px',
        display: 'flex',
        alignItems: 'center',
        justifyContent: 'space-between',
      },
      voiceBadge: {
        fontSize: '11px',
        backgroundColor: '#E8E3DD',
        padding: '3px 8px',
        borderRadius: '10px',
        color: '#7A7067',
      },
      radioOuter: {
        width: '18px',
        height: '18px',
        borderRadius: '50%',
        border: '2px solid #C9A08A',
        display: 'flex',
        alignItems: 'center',
        justifyContent: 'center',
        flexShrink: 0,
      },
      radioInner: {
        width: '10px',
        height: '10px',
        borderRadius: '50%',
        backgroundColor: '#C9A08A',
      },
      storyLabel: {
        fontFamily: "'Cormorant Garamond', Georgia, serif",
        fontWeight: '600',
        fontSize: '16px',
        color: '#3D3530',
      },
      storyContent: {
        paddingLeft: '28px',
        marginTop: '10px',
      },
      storyContentSimple: {
        paddingLeft: '0',
      },
      storyText: {
        fontSize: '14px',
        lineHeight: '1.6',
        color: '#5C544D',
        margin: 0,
        fontWeight: '400',
      },
      storyPlaceholder: {
        fontSize: '14px',
        lineHeight: '1.6',
        color: '#B5A99A',
        margin: 0,
        fontWeight: '400',
      },
      variationCard: {
        backgroundColor: '#FAF8F5',
        borderRadius: '12px',
        padding: '16px',
        border: '2px solid transparent',
        cursor: 'pointer',
        transition: 'border-color 0.2s ease',
      },
      variationHeader: {
        display: 'flex',
        alignItems: 'center',
        gap: '10px',
      },
      anotherTakeButton: {
        marginLeft: 'auto',
        background: 'none',
        border: 'none',
        color: '#C9A08A',
        fontSize: '13px',
        cursor: 'pointer',
        display: 'flex',
        alignItems: 'center',
        gap: '4px',
        fontFamily: "'Source Sans 3', sans-serif",
        fontWeight: '500',
      },
      chevron: {
        fontSize: '10px',
      },
      centerColumn: {
        display: 'flex',
        flexDirection: 'column',
        minHeight: 0,
        minWidth: 0,
        overflow: 'hidden',
      },
      chatContainer: {
        backgroundColor: '#E8E3DD',
        borderRadius: '12px',
        display: 'flex',
        flexDirection: 'column',
        height: '100%',
        overflow: 'hidden',
      },
      titleDropdown: {
        padding: '14px 20px',
        borderBottom: '1px solid #DED8D1',
        display: 'flex',
        alignItems: 'center',
        justifyContent: 'center',
        gap: '8px',
        fontFamily: "'Cormorant Garamond', Georgia, serif",
        fontSize: '18px',
        fontWeight: '500',
        color: '#3D3530',
        flexShrink: 0,
      },
      voiceModeIndicator: {
        display: 'flex',
        alignItems: 'center',
        justifyContent: 'center',
        gap: '12px',
        padding: '10px 20px',
        backgroundColor: '#F0EBE6',
        borderBottom: '1px solid #DED8D1',
      },
      voiceModeText: {
        fontSize: '14px',
        color: '#5C544D',
        fontWeight: '500',
      },
      exitVoiceButton: {
        background: 'none',
        border: '1px solid #D4CCC4',
        borderRadius: '15px',
        padding: '4px 12px',
        fontSize: '12px',
        color: '#7A7067',
        cursor: 'pointer',
        fontFamily: "'Source Sans 3', sans-serif",
      },
      messagesContainer: {
        flex: 1,
        overflowY: 'auto',
        padding: '20px',
        display: 'flex',
        flexDirection: 'column',
        gap: '16px',
      },
      welcomeContainer: {
        flex: 1,
        display: 'flex',
        flexDirection: 'column',
        alignItems: 'center',
        justifyContent: 'center',
        textAlign: 'center',
        padding: '40px 30px',
      },
      welcomeTitle: {
        fontFamily: "'Cormorant Garamond', Georgia, 'Times New Roman', serif",
        fontSize: '32px',
        fontWeight: '400',
        color: '#3D3530',
        marginBottom: '16px',
        letterSpacing: '0.5px',
      },
      welcomeText: {
        fontSize: '15px',
        lineHeight: '1.65',
        color: '#7A7067',
        maxWidth: '380px',
        margin: '0 0 28px 0',
        fontWeight: '400',
      },
      welcomeInputWrapper: {
        display: 'flex',
        alignItems: 'center',
        backgroundColor: '#FFFFFF',
        borderRadius: '28px',
        padding: '10px 10px 10px 18px',
        gap: '10px',
        border: '1px solid #E0DAD4',
        width: '100%',
        maxWidth: '420px',
      },
      welcomeInput: {
        flex: 1,
        border: 'none',
        outline: 'none',
        fontSize: '15px',
        fontFamily: "'Source Sans 3', sans-serif",
        color: '#3D3530',
        backgroundColor: 'transparent',
      },
      welcomeSendButton: {
        background: 'none',
        border: 'none',
        cursor: 'pointer',
        color: '#A89F94',
        padding: '8px',
        display: 'flex',
        alignItems: 'center',
        justifyContent: 'center',
      },
      welcomeMicButton: {
        backgroundColor: '#C75B3F',
        border: 'none',
        borderRadius: '50%',
        width: '40px',
        height: '40px',
        cursor: 'pointer',
        display: 'flex',
        alignItems: 'center',
        justifyContent: 'center',
        flexShrink: 0,
        transition: 'all 0.2s ease',
      },
      voiceHint: {
        fontSize: '12px',
        color: '#A89F94',
        marginTop: '12px',
      },
      userMessage: {
        display: 'flex',
        justifyContent: 'flex-end',
      },
      userBubble: {
        backgroundColor: '#F5F0EB',
        padding: '12px 16px',
        borderRadius: '18px',
        maxWidth: '80%',
        fontSize: '15px',
        lineHeight: '1.5',
        color: '#3D3530',
      },
      assistantMessage: {
        display: 'flex',
        justifyContent: 'flex-start',
      },
      assistantText: {
        fontSize: '15px',
        lineHeight: '1.6',
        color: '#3D3530',
        margin: 0,
        maxWidth: '85%',
      },
      typingIndicator: {
        display: 'flex',
        gap: '5px',
        padding: '10px 0',
      },
      dot: {
        width: '8px',
        height: '8px',
        borderRadius: '50%',
        backgroundColor: '#A89F94',
        animation: 'pulse 1.2s ease-in-out infinite',
      },
      inputContainer: {
        padding: '16px 20px',
        borderTop: '1px solid #DED8D1',
        flexShrink: 0,
      },
      inputWrapper: {
        display: 'flex',
        alignItems: 'center',
        backgroundColor: '#FFFFFF',
        borderRadius: '28px',
        padding: '10px 10px 10px 18px',
        gap: '10px',
        border: '1px solid #E0DAD4',
      },
      textInput: {
        flex: 1,
        border: 'none',
        outline: 'none',
        fontSize: '15px',
        fontFamily: "'Source Sans 3', sans-serif",
        color: '#3D3530',
        backgroundColor: 'transparent',
      },
      sendButton: {
        background: 'none',
        border: 'none',
        cursor: 'pointer',
        color: '#A89F94',
        padding: '8px',
        display: 'flex',
        alignItems: 'center',
        justifyContent: 'center',
      },
      micButton: {
        backgroundColor: '#C75B3F',
        border: 'none',
        borderRadius: '50%',
        width: '40px',
        height: '40px',
        cursor: 'pointer',
        display: 'flex',
        alignItems: 'center',
        justifyContent: 'center',
        flexShrink: 0,
        transition: 'all 0.2s ease',
      },
      rightColumn: {
        display: 'flex',
        flexDirection: 'column',
        gap: '12px',
        overflowY: 'auto',
        minWidth: 0,
        paddingLeft: '4px',
      },
      formatDropdown: {
        backgroundColor: '#FAF8F5',
        borderRadius: '10px',
        padding: '14px 16px',
        display: 'flex',
        alignItems: 'center',
        gap: '8px',
        fontSize: '14px',
        color: '#3D3530',
        position: 'relative',
      },
      formatLabel: {
        fontWeight: '500',
      },
      formatValue: {
        marginLeft: 'auto',
        color: '#5C544D',
      },
      formatSelect: {
        position: 'absolute',
        top: 0,
        left: 0,
        width: '100%',
        height: '100%',
        opacity: 0,
        cursor: 'pointer',
      },
      addStyleButton: {
        backgroundColor: '#FAF8F5',
        border: '1px solid #E0DAD4',
        borderRadius: '10px',
        padding: '16px 20px',
        fontSize: '15px',
        color: '#3D3530',
        cursor: 'pointer',
        textAlign: 'center',
        fontFamily: "'Source Sans 3', sans-serif",
        fontWeight: '400',
      },
      stylesGrid: {
        display: 'grid',
        gridTemplateColumns: '1fr 1fr',
        gap: '12px',
      },
      styleCard: {
        backgroundColor: '#FAF8F5',
        borderRadius: '10px',
        overflow: 'hidden',
        cursor: 'pointer',
        border: '2px solid transparent',
        transition: 'border-color 0.2s ease, transform 0.2s ease',
      },
      styleCardSelected: {
        borderColor: '#C75B3F',
        transform: 'scale(1.02)',
      },
      styleImageContainer: {
        position: 'relative',
        aspectRatio: '1',
      },
      styleImage: {
        width: '100%',
        height: '100%',
        objectFit: 'cover',
        display: 'block',
      },
      styleMenuButton: {
        position: 'absolute',
        top: '8px',
        right: '8px',
        background: 'rgba(255,255,255,0.9)',
        border: 'none',
        borderRadius: '50%',
        width: '26px',
        height: '26px',
        cursor: 'pointer',
        color: '#3D3530',
        display: 'flex',
        alignItems: 'center',
        justifyContent: 'center',
      },
      styleName: {
        padding: '10px 12px',
        margin: 0,
        fontSize: '13px',
        fontWeight: '500',
        color: '#3D3530',
        lineHeight: '1.3',
      },
      footer: {
        display: 'flex',
        justifyContent: 'flex-end',
        alignItems: 'center',
        gap: '12px',
        padding: '14px 24px',
        backgroundColor: '#FAF8F5',
        borderTop: '1px solid #E8E2DB',
        flexShrink: 0,
        zIndex: 100,
      },
      saveButton: {
        backgroundColor: 'transparent',
        color: '#3D3530',
        border: '1px solid #D4CCC4',
        padding: '12px 24px',
        borderRadius: '25px',
        fontSize: '14px',
        fontWeight: '500',
        cursor: 'pointer',
        fontFamily: "'Source Sans 3', sans-serif",
      },
      createButton: {
        backgroundColor: '#8B7355',
        color: 'white',
        border: 'none',
        padding: '12px 24px',
        borderRadius: '25px',
        fontSize: '14px',
        fontWeight: '500',
        cursor: 'pointer',
        display: 'flex',
        alignItems: 'center',
        gap: '8px',
        fontFamily: "'Source Sans 3', sans-serif",
      },
      helpButton: {
        backgroundColor: 'transparent',
        color: '#3D3530',
        border: '1px solid #D4CCC4',
        borderRadius: '50%',
        width: '40px',
        height: '40px',
        fontSize: '16px',
        cursor: 'pointer',
        display: 'flex',
        alignItems: 'center',
        justifyContent: 'center',
        fontFamily: "'Source Sans 3', sans-serif",
      },
    };

    const root = ReactDOM.createRoot(document.getElementById('root'));
    root.render(<SocietyArtsStoryBuilder />);
  </script>
</body>
</html>
